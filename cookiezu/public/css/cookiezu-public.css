/**
 * CookiEzu – Public Stylesheet
 * Plugin: CookiEzu
 * License: GPL v2 or later
 *
 * Design language mirrors the CookiEzu landing page:
 * warm cream/ink palette, cookie-amber accents, editorial feel.
 */

@import url('https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;1,9..40,300&display=swap');

/* -----------------------------------------------
   CSS Variables — Light (default)
----------------------------------------------- */
:root {
  /* Brand palette */
  --cz-ink:          #1A1208;
  --cz-ink-80:       rgba(26,18,8,0.80);
  --cz-ink-55:       rgba(26,18,8,0.55);
  --cz-ink-20:       rgba(26,18,8,0.12);
  --cz-ink-08:       rgba(26,18,8,0.06);
  --cz-cookie:       #C17B2F;
  --cz-cookie-hover: #A8681F;
  --cz-cookie-pale:  #FDF3E3;
  --cz-cream:        #FBF7F0;
  --cz-warm-white:   #FEFCF8;

  /* Semantic tokens */
  --cz-primary:       var(--cz-cookie);
  --cz-primary-hover: var(--cz-cookie-hover);
  --cz-text:          var(--cz-ink);
  --cz-text-muted:    var(--cz-ink-55);
  --cz-bg:            var(--cz-warm-white);
  --cz-surface:       var(--cz-cream);
  --cz-border:        var(--cz-ink-20);

  /* Elevation */
  --cz-shadow-bar:    0 -4px 32px rgba(26,18,8,0.10);
  --cz-shadow-top:    0  4px 32px rgba(26,18,8,0.10);
  --cz-shadow-float:  0 20px 60px rgba(26,18,8,0.18), 0 4px 16px rgba(26,18,8,0.10);

  /* Shape */
  --cz-radius:     10px;
  --cz-radius-lg:  16px;
  --cz-radius-xl:  20px;

  /* Motion */
  --cz-ease:       cubic-bezier(0.22, 1, 0.36, 1);
  --cz-duration:   0.28s;

  /* Typography */
  --cz-font: 'DM Sans', -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;

  /* Stack */
  --cz-z: 999999;
}

/* -----------------------------------------------
   Dark theme overrides
----------------------------------------------- */
.cookiezu-theme-dark {
  --cz-ink:        #FEFCF8;
  --cz-ink-80:     rgba(254,252,248,0.80);
  --cz-ink-55:     rgba(254,252,248,0.55);
  --cz-ink-20:     rgba(254,252,248,0.12);
  --cz-ink-08:     rgba(254,252,248,0.06);
  --cz-text:       #FEFCF8;
  --cz-text-muted: rgba(254,252,248,0.60);
  --cz-bg:         #1A1208;
  --cz-surface:    #231A0D;
  --cz-border:     rgba(254,252,248,0.10);
  --cz-shadow-bar:   0 -4px 40px rgba(0,0,0,0.40);
  --cz-shadow-top:   0  4px 40px rgba(0,0,0,0.40);
  --cz-shadow-float: 0 24px 64px rgba(0,0,0,0.55);
}

/* -----------------------------------------------
   Banner shell
----------------------------------------------- */
.cookiezu-banner {
  position: fixed;
  z-index: var(--cz-z);
  font-family: var(--cz-font);
  font-size: 14px;
  color: var(--cz-text);
  box-sizing: border-box;
  /* entrance handled per-position below */
}

/* -----------------------------------------------
   Positions + entrance animations
----------------------------------------------- */
.cookiezu-pos-bottom {
  bottom: 0; left: 0; right: 0;
  animation: cz-slide-up var(--cz-duration) var(--cz-ease) both;
}
.cookiezu-pos-top {
  top: 0; left: 0; right: 0;
  animation: cz-slide-down var(--cz-duration) var(--cz-ease) both;
}
.cookiezu-pos-bottom-left {
  bottom: 24px; left: 24px;
  max-width: 400px;
  animation: cz-fade-up var(--cz-duration) var(--cz-ease) both;
}
.cookiezu-pos-bottom-right {
  bottom: 24px; right: 24px;
  max-width: 400px;
  animation: cz-fade-up var(--cz-duration) var(--cz-ease) both;
}

@keyframes cz-slide-up   { from { transform: translateY(100%); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
@keyframes cz-slide-down { from { transform: translateY(-100%); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
@keyframes cz-fade-up    { from { transform: translateY(16px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

/* -----------------------------------------------
   Inner wrapper — shared across layouts
----------------------------------------------- */
.cookiezu-inner {
  box-sizing: border-box;
}

/* -----------------------------------------------
   Layout: Bar
----------------------------------------------- */
.cookiezu-layout-bar .cookiezu-inner {
  background: var(--cz-bg);
  border-top: 1.5px solid var(--cz-border);
  padding: 16px 28px;
  display: flex;
  align-items: center;
  gap: 20px;
  flex-wrap: wrap;
  box-shadow: var(--cz-shadow-bar);
  /* subtle warm accent line */
  position: relative;
}
.cookiezu-layout-bar .cookiezu-inner::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 2px;
  background: linear-gradient(90deg, var(--cz-cookie) 0%, #E8A84A 100%);
}

.cookiezu-pos-top .cookiezu-layout-bar .cookiezu-inner {
  border-top: none;
  border-bottom: 1.5px solid var(--cz-border);
  box-shadow: var(--cz-shadow-top);
}
.cookiezu-pos-top .cookiezu-layout-bar .cookiezu-inner::before {
  top: auto; bottom: 0;
}

.cookiezu-layout-bar .cookiezu-text  { flex: 1; min-width: 200px; }
.cookiezu-layout-bar .cookiezu-actions {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  align-items: center;
}

/* -----------------------------------------------
   Layout: Box
----------------------------------------------- */
.cookiezu-layout-box .cookiezu-inner {
  background: var(--cz-bg);
  border-radius: var(--cz-radius-xl);
  box-shadow: var(--cz-shadow-float);
  padding: 28px;
  max-width: 380px;
  width: 100%;
  border: 1px solid var(--cz-border);
  position: relative;
  overflow: hidden;
}
.cookiezu-layout-box .cookiezu-inner::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 3px;
  background: linear-gradient(90deg, var(--cz-cookie) 0%, #E8A84A 100%);
}
.cookiezu-layout-box .cookiezu-actions {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 20px;
}
.cookiezu-layout-box .cookiezu-btn { width: 100%; justify-content: center; }

/* -----------------------------------------------
   Layout: Modal
----------------------------------------------- */
.cookiezu-layout-modal {
  display: flex !important;
  align-items: center;
  justify-content: center;
  inset: 0;
}
.cookiezu-overlay {
  position: fixed;
  inset: 0;
  background: rgba(26,18,8,0.55);
  backdrop-filter: blur(4px);
  z-index: -1;
  animation: cz-overlay-in 0.3s ease both;
}
@keyframes cz-overlay-in { from { opacity: 0; } to { opacity: 1; } }

.cookiezu-layout-modal .cookiezu-inner {
  background: var(--cz-bg);
  border-radius: var(--cz-radius-xl);
  box-shadow: var(--cz-shadow-float);
  padding: 32px;
  max-width: 460px;
  width: calc(100% - 32px);
  border: 1px solid var(--cz-border);
  position: relative;
  overflow: hidden;
  z-index: 1;
}
.cookiezu-layout-modal .cookiezu-inner::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 3px;
  background: linear-gradient(90deg, var(--cz-cookie) 0%, #E8A84A 100%);
}
.cookiezu-layout-modal .cookiezu-actions {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 20px;
}
.cookiezu-layout-modal .cookiezu-btn { width: 100%; justify-content: center; }

/* -----------------------------------------------
   Cookie icon badge (shown before title in box/modal)
----------------------------------------------- */
.cookiezu-layout-box .cookiezu-icon-badge,
.cookiezu-layout-modal .cookiezu-icon-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 44px;
  height: 44px;
  background: var(--cz-cookie-pale);
  border-radius: 12px;
  font-size: 22px;
  margin-bottom: 16px;
}

/* -----------------------------------------------
   Text
----------------------------------------------- */
.cookiezu-title {
  display: block;
  font-size: 15px;
  font-weight: 700;
  letter-spacing: -0.2px;
  margin-bottom: 5px;
  color: var(--cz-text);
  line-height: 1.3;
}
.cookiezu-message {
  margin: 0;
  font-size: 13px;
  line-height: 1.65;
  color: var(--cz-text-muted);
}
.cookiezu-message a {
  color: var(--cz-cookie);
  text-decoration: underline;
  text-underline-offset: 2px;
}
.cookiezu-message a:hover { opacity: 0.8; }

/* -----------------------------------------------
   Buttons
----------------------------------------------- */
.cookiezu-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 10px 20px;
  border-radius: var(--cz-radius);
  border: 1.5px solid transparent;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition:
    background  var(--cz-duration) var(--cz-ease),
    color       var(--cz-duration) var(--cz-ease),
    border-color var(--cz-duration) var(--cz-ease),
    transform   0.15s ease,
    box-shadow  0.15s ease;
  white-space: nowrap;
  font-family: var(--cz-font);
  line-height: 1;
  letter-spacing: 0.1px;
}
.cookiezu-btn:active { transform: scale(0.97); }

/* Primary — cookie amber, matches brand */
.cookiezu-btn-primary {
  background: var(--cz-cookie);
  color: #fff;
  border-color: var(--cz-cookie);
  box-shadow: 0 2px 12px rgba(193,123,47,0.30);
}
.cookiezu-btn-primary:hover {
  background: var(--cz-cookie-hover);
  border-color: var(--cz-cookie-hover);
  transform: translateY(-1px);
  box-shadow: 0 4px 20px rgba(193,123,47,0.38);
}

/* Secondary — ghost */
.cookiezu-btn-secondary {
  background: transparent;
  color: var(--cz-text);
  border-color: var(--cz-border);
}
.cookiezu-btn-secondary:hover {
  background: var(--cz-ink-08);
  border-color: rgba(26,18,8,0.25);
}

/* Link style */
.cookiezu-btn-link {
  background: none;
  border: none;
  color: var(--cz-text-muted);
  padding: 10px 4px;
  font-size: 12px;
  text-decoration: underline;
  text-underline-offset: 2px;
}
.cookiezu-btn-link:hover { color: var(--cz-text); }

/* -----------------------------------------------
   Preferences panel
----------------------------------------------- */
.cookiezu-preferences { width: 100%; }

.cookiezu-preferences h3 {
  margin: 0 0 4px;
  font-size: 16px;
  font-weight: 700;
  letter-spacing: -0.3px;
  color: var(--cz-text);
}
.cookiezu-preferences > p {
  font-size: 12px;
  color: var(--cz-text-muted);
  margin: 0 0 18px;
  line-height: 1.5;
}

.cookiezu-category {
  border: 1.5px solid var(--cz-border);
  border-radius: var(--cz-radius);
  margin-bottom: 10px;
  overflow: hidden;
  background: var(--cz-surface);
  transition: border-color var(--cz-duration) ease;
}
.cookiezu-category:has(input:checked) {
  border-color: rgba(193,123,47,0.35);
  background: var(--cz-cookie-pale);
}

.cookiezu-category-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
  padding: 14px 16px;
}
.cookiezu-category-header > div { flex: 1; }
.cookiezu-category-header strong {
  display: block;
  font-size: 13px;
  font-weight: 700;
  margin-bottom: 3px;
  color: var(--cz-text);
}
.cookiezu-category-header p {
  margin: 0;
  font-size: 11.5px;
  color: var(--cz-text-muted);
  line-height: 1.5;
}

/* ── Toggle switch ── */
.cookiezu-toggle {
  position: relative;
  display: inline-block;
  width: 46px;
  height: 26px;
  flex-shrink: 0;
  cursor: pointer;
  margin-top: 2px;
}
.cookiezu-toggle input { opacity: 0; width: 0; height: 0; }
.cookiezu-slider {
  position: absolute;
  inset: 0;
  background: var(--cz-ink-20);
  border-radius: 26px;
  transition: background var(--cz-duration) var(--cz-ease);
}
.cookiezu-slider::before {
  content: "";
  position: absolute;
  height: 20px;
  width: 20px;
  left: 3px;
  bottom: 3px;
  background: #fff;
  border-radius: 50%;
  box-shadow: 0 1px 4px rgba(0,0,0,0.18);
  transition: transform var(--cz-duration) var(--cz-ease);
}
.cookiezu-toggle input:checked + .cookiezu-slider {
  background: var(--cz-cookie);
}
.cookiezu-toggle input:checked + .cookiezu-slider::before {
  transform: translateX(20px);
}
.cookiezu-toggle:focus-within .cookiezu-slider {
  outline: 2px solid var(--cz-cookie);
  outline-offset: 2px;
}
.cookiezu-toggle-disabled { opacity: 0.5; cursor: not-allowed; }

/* ── Cookie details table ── */
.cookiezu-cookie-table-wrap {
  padding: 0 16px 14px;
  border-top: 1px solid var(--cz-border);
  margin-top: 4px;
}
.cookiezu-cookie-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 11.5px;
  margin-top: 10px;
}
.cookiezu-cookie-table th,
.cookiezu-cookie-table td {
  padding: 7px 8px;
  text-align: left;
  border-bottom: 1px solid var(--cz-border);
  color: var(--cz-text);
}
.cookiezu-cookie-table th {
  font-weight: 600;
  font-size: 10.5px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--cz-text-muted);
}
.cookiezu-cookie-table tr:last-child td { border-bottom: none; }

/* ── Pref action buttons ── */
.cookiezu-pref-actions {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  margin-top: 18px;
  padding-top: 16px;
  border-top: 1px solid var(--cz-border);
}

/* -----------------------------------------------
   Re-open floating button
----------------------------------------------- */
.cookiezu-reopen {
  position: fixed;
  bottom: 20px;
  left: 20px;
  z-index: var(--cz-z);
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: var(--cz-ink);
  border: none;
  font-size: 22px;
  cursor: pointer;
  box-shadow: 0 4px 20px rgba(26,18,8,0.25);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform 0.2s var(--cz-ease), box-shadow 0.2s ease;
}
.cookiezu-reopen:hover {
  transform: scale(1.10) rotate(-10deg);
  box-shadow: 0 8px 30px rgba(26,18,8,0.30);
}

/* -----------------------------------------------
   Responsive
----------------------------------------------- */
@media (max-width: 640px) {
  .cookiezu-layout-bar .cookiezu-inner {
    flex-direction: column;
    align-items: flex-start;
    padding: 16px 18px;
  }
  .cookiezu-layout-bar .cookiezu-actions { width: 100%; }
  .cookiezu-layout-bar .cookiezu-btn { flex: 1; }

  .cookiezu-pos-bottom-left,
  .cookiezu-pos-bottom-right {
    left: 12px;
    right: 12px;
    bottom: 12px;
    max-width: 100%;
  }
}

/* -----------------------------------------------
   Accessibility — reduced motion
----------------------------------------------- */
@media (prefers-reduced-motion: reduce) {
  .cookiezu-banner,
  .cookiezu-btn,
  .cookiezu-slider,
  .cookiezu-slider::before,
  .cookiezu-reopen { transition: none !important; animation: none !important; }
}
